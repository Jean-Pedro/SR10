<html>
    <head>
        <meta charset="utf-8">
        <title>Administrateur</title>
        <link rel="stylesheet" href="/stylesheets/main.css">
    </head>
    <body>
        <div id="page">
            <div id="top_bar">
                <div id="home_button">
                    <a href="/admin/admin_main"><button id="menu">Menu</button></a>
                </div>
                <div id="account">
                    <a href="/admin/admin_account"><button id="account">Mon compte</button></a>
                </div>
            </div>
    
            <div id="container">
                <div id="offers">
                    <div id="label">
                        <label for="candidat">Espace Administrateur - Validation Recruteur</label>
                    </div>        
                    <% users.forEach((user)=> { %>  
                        <div id="off">
                            <div id="off_img">
                                <img src="../profil.jpeg" alt="Photo de profil">
                            </div>
                            <div class="entreprise">                                
                                <h1><%= user.prenom + ' ' + user.nom%></h1>
                            </div>
                            <div class="desc">
                                <p><%= user.email%></p>
                                <p><%= user.num_tel%></p>
                            </div>
                            <div class="offer_button">
                                <!-- <a href="admin_desc_acc.html"><button id="accepter">Plus de détails</button></a> -->
                                <button onclick="details(this)" data-email="<%= user.email %>">Plus de détails</button>
                            </div>
                        </div>
                    <% }) %>
                </div>
                <!--
                <div id="box">
                    <div id="toolbox">
                        <div id="search">
                            <div id="label">
                                <label for="search">Rechercher</label> <br>
                            </div>
                            <div id="input_search">
                                <input type="search" id="search" name="search" placeholder="Rechercher..." required>
                            </div>
                        </div>
                        <div id="label">
                                <label for="sort">Trier</label>
                        </div>
                        <select name="date" id="date">
                            <option value="" disabled selected hidden>Date</option>
                            <option value="recent">Récent</option>
                            <option value="ancien">Ancien</option>
                        </select>
                        <div id="label">
                            <label for="filter">Filtrer</label>
                        </div>
                    </div>
    
                </div>
                -->
            </div>
        </div>
        <script>
            function details(button) {
                var email = button.getAttribute('data-email');
                console.log(`Email de l'utilisateur : ${email}`);
                window.location.href = `/admin/user_recr_details/${email}`;


                // var offreDiv = button.closest('.desc_offre');
                // var idCandidatureElement = offreDiv.querySelector('.entreprise > p:last-child');
                // var idCandidatureText = idCandidatureElement.textContent.trim();
                // var id_fiche = idCandidatureText.split('Numéro de fiche de poste : ')[1];
                // console.log(`/candidat/candidater/${id_fiche}`);
                // window.location.href = `/candidat/candidater/${id_fiche}`;
            };
        </script>
    </body>
</html>