<html>
    <head>
        <meta charset="utf-8">
        <title>Details Utilisateurs</title>
        <link rel="stylesheet" href="/stylesheets/main.css">
    </head>
    <body>
        <div id="page">
            <div id="top_bar">
                <div id="home_button">
                    <a href="/admin/admin_main"><button id="menu">Menu</button></a>
                </div>
                <div id="account">
                    <a href="/admin/admin_account"><button id="account">Mon compte</button></a>
                </div>
            </div>
            <div class="container_val">
                <div class="desc_offre">
                    <div class="entreprise">
                        <h1 id="user-role"><%= user.nom %> <%= user.prenom%> - <span id="role"><%= user.role %></span></h1>
                        <p>Numéro de Téléphone : <%= user.num_tel %></p>
                    </div>
                    <div class="siege_social">
                        <p>Date de création : <%= user.date_creation %></p>
                        <p>Dernière connexion : <%= user.last_login %></p>
                    </div>
                    <div class="offer_button" id="admin-button">
                        <!-- <a href="/admin/confirmation_admin"><button id="accepter">Passer en administrateur</button></a> -->
                        <button id="accepter">Passer en administrateur</button>
                    </div>
                    <!-- <div class="offer_button">
                        <a href="/admin/confirmation_admin"><button id="accepter">Refuse</button></a>
                    </div> -->
                </div>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var userRole = document.getElementById('role').textContent.trim();
                if (userRole === 'Administrateur') {
                    var adminButton = document.getElementById('admin-button');
                    adminButton.style.display = 'none';
                }

                var accepterButton = document.getElementById('accepter');
                accepterButton.addEventListener('click', function(event) {
                    event.preventDefault();
                    var confirmation = confirm('Êtes-vous sûr de vouloir passer cet utilisateur en administrateur ?');
                    if (confirmation) {
                        window.location.href = '/admin/confirmation_passage_admin/<%=user.id_utilisateur%>';
                    }
                });
            });


            // function candidater(button) {
            //     var offreDiv = button.closest('.desc_offre');
            //     var idCandidatureElement = offreDiv.querySelector('.entreprise > p:last-child');
            //     var idCandidatureText = idCandidatureElement.textContent.trim();
            //     var id_fiche = idCandidatureText.split('Numéro de fiche de poste : ')[1];
            //     console.log(`/candidat/candidater/${id_fiche}`);
            //     window.location.href = `/candidat/candidater/${id_fiche}`;
            // };
        </script>
    </body>
</html>